import math
import json


coordinates = """
{\"id_number\":\"1231234\",\"identifier\":\"android779256688\",\"type\":\"running\",\"routes\":[[\"-1.2267779\",\"36.8864388\"],[\"-1.2269677\",\"36.8864316\"],[\"-1.2271436\",\"36.8865374\"],[\"-1.2273401\",\"36.8865989\"],[\"-1.227504\",\"36.8866807\"],[\"-1.2277008\",\"36.8867471\"],[\"-1.2278919\",\"36.88682\"],[\"-1.2280758\",\"36.8869043\"],[\"-1.2282663\",\"36.886967\"],[\"-1.2284611\",\"36.8870391\"],[\"-1.2286333\",\"36.8871143\"],[\"-1.2288181\",\"36.8872082\"],[\"-1.2289917\",\"36.8872803\"],[\"-1.2291831\",\"36.8873485\"],[\"-1.2293597\",\"36.8874116\"],[\"-1.2295559\",\"36.8874723\"],[\"-1.2297347\",\"36.8875548\"],[\"-1.2299061\",\"36.8876567\"],[\"-1.2301128\",\"36.887712\"],[\"-1.2303008\",\"36.8877912\"],[\"-1.2304743\",\"36.8878559\"],[\"-1.2306512\",\"36.8879116\"],[\"-1.2308345\",\"36.887975\"],[\"-1.2310173\",\"36.8880516\"],[\"-1.2312078\",\"36.8880997\"],[\"-1.2313984\",\"36.8881933\"],[\"-1.2315847\",\"36.8882669\"],[\"-1.2317816\",\"36.8883579\"],[\"-1.231988\",\"36.8884361\"],[\"-1.2321789\",\"36.8885126\"],[\"-1.232357\",\"36.8885883\"],[\"-1.2325266\",\"36.8886519\"],[\"-1.2327096\",\"36.8887323\"],[\"-1.2328863\",\"36.8888215\"],[\"-1.23306\",\"36.8889332\"],[\"-1.2332135\",\"36.889036\"],[\"-1.2333704\",\"36.8891619\"],[\"-1.2335196\",\"36.889304\"],[\"-1.2336825\",\"36.8894384\"],[\"-1.2338299\",\"36.8895942\"],[\"-1.2339352\",\"36.8897504\"],[\"-1.2340475\",\"36.8899607\"],[\"-1.2341044\",\"36.8901403\"],[\"-1.2341667\",\"36.8903584\"],[\"-1.2342057\",\"36.8905444\"],[\"-1.2341837\",\"36.8907438\"],[\"-1.2341606\",\"36.8909326\"],[\"-1.2343422\",\"36.8908508\"],[\"-1.2344362\",\"36.8910081\"],[\"-1.2343725\",\"36.8911801\"],[\"-1.2342495\",\"36.8913484\"],[\"-1.2341109\",\"36.8914841\"],[\"-1.2339642\",\"36.8916366\"],[\"-1.2337977\",\"36.8917777\"],[\"-1.2336593\",\"36.8919202\"],[\"-1.2335176\",\"36.8920423\"],[\"-1.2333596\",\"36.8921901\"],[\"-1.2332003\",\"36.892307\"],[\"-1.2330525\",\"36.8924301\"],[\"-1.2328891\",\"36.8925665\"],[\"-1.2327518\",\"36.8926919\"],[\"-1.2326508\",\"36.8928459\"],[\"-1.2325407\",\"36.893004\"],[\"-1.2324541\",\"36.8931783\"],[\"-1.2323702\",\"36.8933778\"],[\"-1.232334\",\"36.8935553\"],[\"-1.2323038\",\"36.8937789\"],[\"-1.2323116\",\"36.8940048\"],[\"-1.2323445\",\"36.8941909\"],[\"-1.232395\",\"36.8943665\"],[\"-1.2324254\",\"36.8945448\"],[\"-1.2324437\",\"36.8947624\"],[\"-1.2324702\",\"36.8949489\"],[\"-1.2324891\",\"36.8951634\"],[\"-1.2324376\",\"36.8953507\"],[\"-1.2324037\",\"36.8955474\"],[\"-1.2324026\",\"36.8957454\"],[\"-1.2323926\",\"36.895944\"],[\"-1.2323689\",\"36.8961356\"],[\"-1.2323355\",\"36.8963424\"],[\"-1.2322876\",\"36.896547\"],[\"-1.2322941\",\"36.896763\"],[\"-1.2322962\",\"36.8969476\"],[\"-1.2323417\",\"36.8971475\"],[\"-1.232403\",\"36.8973445\"],[\"-1.2325126\",\"36.8975444\"],[\"-1.2326228\",\"36.8977174\"],[\"-1.232756\",\"36.8978975\"],[\"-1.2328813\",\"36.8980876\"],[\"-1.2329821\",\"36.8982479\"],[\"-1.2330545\",\"36.8984305\"],[\"-1.2331381\",\"36.898634\"],[\"-1.233197\",\"36.8988118\"],[\"-1.2332296\",\"36.8990297\"],[\"-1.2332679\",\"36.8992449\"],[\"-1.2332866\",\"36.8994769\"],[\"-1.2332988\",\"36.8996579\"],[\"-1.2332711\",\"36.8998541\"],[\"-1.2332448\",\"36.9000592\"],[\"-1.2331829\",\"36.9002714\"],[\"-1.2331165\",\"36.9004477\"],[\"-1.233044\",\"36.900634\"],[\"-1.2329632\",\"36.9008153\"],[\"-1.2328522\",\"36.9010025\"],[\"-1.2327196\",\"36.9011826\"],[\"-1.2326058\",\"36.9013641\"],[\"-1.2324853\",\"36.9015456\"],[\"-1.2323911\",\"36.9017085\"],[\"-1.2322775\",\"36.9018542\"],[\"-1.232177\",\"36.9020599\"],[\"-1.232076\",\"36.9022336\"],[\"-1.2319921\",\"36.9024042\"],[\"-1.2319263\",\"36.9025861\"],[\"-1.2318387\",\"36.9027463\"],[\"-1.231783\",\"36.9029598\"],[\"-1.23171\",\"36.9031837\"],[\"-1.2316734\",\"36.9033717\"],[\"-1.2314726\",\"36.9033884\"],[\"-1.2315221\",\"36.903185\"],[\"-1.2315709\",\"36.9030084\"],[\"-1.2316226\",\"36.9028235\"],[\"-1.2317029\",\"36.9026011\"],[\"-1.2317747\",\"36.9024258\"],[\"-1.2319009\",\"36.9022254\"],[\"-1.2319563\",\"36.9020501\"],[\"-1.232055\",\"36.9018583\"],[\"-1.2321637\",\"36.9016762\"],[\"-1.232271\",\"36.9015056\"],[\"-1.2324335\",\"36.9012872\"],[\"-1.2325325\",\"36.9011259\"],[\"-1.2326369\",\"36.9009541\"],[\"-1.2327425\",\"36.9008052\"],[\"-1.2328322\",\"36.9005865\"],[\"-1.232909\",\"36.9004181\"],[\"-1.2329494\",\"36.9002325\"],[\"-1.2329951\",\"36.9000559\"],[\"-1.2330353\",\"36.8998712\"],[\"-1.2330468\",\"36.8996892\"],[\"-1.2330582\",\"36.8995005\"],[\"-1.2330367\",\"36.8993164\"],[\"-1.2330334\",\"36.8991241\"],[\"-1.2329996\",\"36.8989349\"],[\"-1.2329523\",\"36.8987521\"],[\"-1.2328871\",\"36.898583\"],[\"-1.2327995\",\"36.8983894\"],[\"-1.2327207\",\"36.8982197\"],[\"-1.2325891\",\"36.8980348\"],[\"-1.2324744\",\"36.8978503\"],[\"-1.2323591\",\"36.8977009\"],[\"-1.2322635\",\"36.8975354\"],[\"-1.2321743\",\"36.8973492\"],[\"-1.2321193\",\"36.8971697\"],[\"-1.2320773\",\"36.8969688\"],[\"-1.2320646\",\"36.8967769\"],[\"-1.232033\",\"36.8965768\"],[\"-1.2320061\",\"36.8963858\"],[\"-1.2319728\",\"36.8962025\"],[\"-1.2319366\",\"36.8959872\"],[\"-1.2319257\",\"36.8957823\"],[\"-1.2320552\",\"36.8956387\"],[\"-1.2321547\",\"36.8954781\"],[\"-1.2322337\",\"36.8952754\"],[\"-1.2322694\",\"36.8950869\"],[\"-1.2322594\",\"36.8948698\"],[\"-1.2322537\",\"36.8946645\"],[\"-1.2322222\",\"36.8944473\"],[\"-1.2321746\",\"36.8942457\"],[\"-1.2321275\",\"36.8940179\"],[\"-1.2320932\",\"36.8938098\"],[\"-1.2321138\",\"36.8935738\"],[\"-1.2321993\",\"36.8933776\"],[\"-1.2323045\",\"36.8931905\"],[\"-1.2323041\",\"36.8929871\"],[\"-1.2323686\",\"36.8928106\"],[\"-1.2324886\",\"36.8926532\"],[\"-1.2326472\",\"36.8925451\"],[\"-1.2327741\",\"36.8923973\"],[\"-1.2329193\",\"36.8922688\"],[\"-1.2330719\",\"36.8921289\"],[\"-1.2332374\",\"36.8919889\"],[\"-1.2334047\",\"36.8918387\"],[\"-1.2335852\",\"36.8916927\"],[\"-1.2336973\",\"36.8915416\"],[\"-1.2338512\",\"36.8913888\"],[\"-1.2339973\",\"36.8912268\"],[\"-1.2340773\",\"36.8910512\"],[\"-1.2341479\",\"36.8908604\"],[\"-1.2341826\",\"36.8906343\"],[\"-1.2341676\",\"36.8904229\"],[\"-1.2341463\",\"36.8902167\"],[\"-1.2341213\",\"36.8900373\"],[\"-1.2340007\",\"36.889879\"],[\"-1.2338717\",\"36.8897169\"],[\"-1.233731\",\"36.8895543\"],[\"-1.2335806\",\"36.8893885\"],[\"-1.2334475\",\"36.8892483\"],[\"-1.2333079\",\"36.8891322\"],[\"-1.2331388\",\"36.889024\"],[\"-1.2329872\",\"36.8889052\"],[\"-1.232823\",\"36.8888175\"],[\"-1.2326362\",\"36.8887075\"],[\"-1.2324682\",\"36.8886259\"],[\"-1.2322895\",\"36.8885774\"],[\"-1.2321082\",\"36.8884971\"],[\"-1.2319332\",\"36.8884441\"],[\"-1.2317422\",\"36.8883768\"],[\"-1.2315541\",\"36.8882945\"],[\"-1.2313779\",\"36.8882204\"],[\"-1.2311931\",\"36.888147\"],[\"-1.2310153\",\"36.8880893\"],[\"-1.2308416\",\"36.8880213\"],[\"-1.2306749\",\"36.8879497\"],[\"-1.2304765\",\"36.8878693\"],[\"-1.2302829\",\"36.8877817\"],[\"-1.23009\",\"36.8877178\"],[\"-1.2299086\",\"36.8876719\"],[\"-1.2297239\",\"36.88758\"],[\"-1.2295416\",\"36.8875068\"],[\"-1.2293552\",\"36.8874281\"],[\"-1.2291305\",\"36.8873395\"],[\"-1.2289485\",\"36.8872607\"],[\"-1.2287501\",\"36.8871935\"],[\"-1.2285582\",\"36.8871074\"],[\"-1.2283884\",\"36.8870302\"],[\"-1.2281715\",\"36.8869429\"],[\"-1.2279647\",\"36.8868511\"],[\"-1.2277911\",\"36.8867872\"],[\"-1.227596\",\"36.8867257\"],[\"-1.2274136\",\"36.8866523\"],[\"-1.2272372\",\"36.8865539\"],[\"-1.2270395\",\"36.8864832\"],[\"-1.2268369\",\"36.8864162\"],[\"-1.2266461\",\"36.8863981\"],[\"-1.2264484\",\"36.8864119\"],[\"-1.2262331\",\"36.8864434\"],[\"-1.2260157\",\"36.8864657\"],[\"-1.2258034\",\"36.886479\"],[\"-1.2255843\",\"36.8864937\"],[\"-1.2253828\",\"36.886485\"],[\"-1.2251779\",\"36.886467\"],[\"-1.2249705\",\"36.8864935\"],[\"-1.2248469\",\"36.8866291\"],[\"-1.2247316\",\"36.8867958\"],[\"-1.2246157\",\"36.8869752\"],[\"-1.2244802\",\"36.8871356\"],[\"-1.224341\",\"36.887286\"],[\"-1.2241778\",\"36.8874266\"],[\"-1.2240357\",\"36.887541\"],[\"-1.2238798\",\"36.887692\"],[\"-1.223741\",\"36.8878676\"],[\"-1.2235743\",\"36.8880283\"],[\"-1.223435\",\"36.8882016\"],[\"-1.2232782\",\"36.88833\"],[\"-1.2261259\",\"36.8843851\"]]}
"""


list_of_coordinates = []
data = json.loads(coordinates)
for route in data['routes']:
    coord = (float(route[0]), float(route[1]))
    list_of_coordinates.append(coord)


# uses Haversine (distance) function (borrowed from stackoverflow)
def calculate_distance(positions):
    results = []
    for i in range(1, len(positions)):
        loc1 = positions[i - 1]
        loc2 = positions[i]

        lat1 = loc1[0]
        lng1 = loc1[1]

        lat2 = loc2[0]
        lng2 = loc2[1]

        degreesToRadians = (math.pi / 180)
        latrad1 = lat1 * degreesToRadians
        latrad2 = lat2 * degreesToRadians
        dlat = (lat2 - lat1) * degreesToRadians
        dlng = (lng2 - lng1) * degreesToRadians

        a = math.sin(dlat / 2) * math.sin(dlat / 2) + math.cos(latrad1) * \
        math.cos(latrad2) * math.sin(dlng / 2) * math.sin(dlng / 2)
        c = 2 * math.atan2(math.sqrt(a), math.sqrt(1 - a))
        r = 6371000

        results.append(r * c)

    return (sum(results) / 1000)  # Converting from m to km


print(calculate_distance(list_of_coordinates))

